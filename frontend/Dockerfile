FROM node:12.18.3

USER root

MAINTAINER marullo Cho <marulloc0214@gmail.com>
RUN mkdir -p /nextServer
ADD . /nextServer
WORKDIR /nextServer

RUN npm install

ARG SERVER_DOMAIN_PROD=/
ARG SERVER_DOMAIN_DEV=/
ARG NAVER_LOGIN_URL=/
ARG API_URL=/
ARG API_PORT=0

ENV NEXT_PUBLIC_SERVER_DOMAIN_PRODUCTION=${SERVER_DOMAIN_PROD}}
ENV NEXT_PUBLIC_SERVER_DOMAIN_DEVELOP=${SERVER_DOMAIN_DEV}}
ENV NEXT_PUBLIC_NAVER_LOGIN_URL=${NAVER_LOGIN_URL}
ENV API_URL=${API_URL}
ENV API_PORT=${API_PORT}

RUN npm run build

EXPOSE 3000

CMD "npm" "start"



